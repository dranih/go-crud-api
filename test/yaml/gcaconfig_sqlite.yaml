api:
  driver: "sqlite"
  controllers: "records,columns,geojson,openapi,status"
  address: "/tmp/gocrudtests.db"
  database: "go-crud-api"
  username: "go-crud-api"
  password: "go-crud-api"

  middlewares:
  - basicAuth:
      - mode: "optional"
      - realm: "GoCrudApi : Username and password required"
      - passwordFile: "../../test/test.pwd"
  - json:
  - cors:
  - authorization:
    - columnHandler: "{{ if eq .ColumnName \"invisible\"}} false {{ else }} true {{ end }}"
    - tableHandler: "{{ if eq .TableName \"invisibles\"}} false {{ else }} true {{ end }}"
    - recordHandler: "{{ if eq .TableName \"comments\"}} filter=message,neq,invisible {{ else }}{{ end }}"
  - multiTenancy:
    - handler: "{{ if eq .TableName \"kunsthåndværk\"}}{\"user_id\":1}{{ else }}{}{{ end }}"
  - sanitation:
    - handler: "{{ if kindIs \"string\" .Value }}{{regexReplaceAllLiteral \"<(.|\\n)*?>\" .Value \"\"}}{{ else }}{{ .Value| print }}{{ end }}"
    - table: "forgiving"
